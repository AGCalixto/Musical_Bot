# Musical Bot

A Telegram bot that fetches lyrics and chords for any song and generates a clean, downloadable PDF. Just send the song name, and get a ready-to-play version with lyrics and guitar chords!

---

## Table of Contents

- Features
- Tech Information / Libraries Used
- Project Structure
- Architecture Overview
-- Chords.py
-- Lyrics.py
-- pdf_creation.py
-- Telegram_Bot.py
-- chromedriver.exe
-- DejaVuSans.ttf
- How to Use
- Future Updates
- Author

---

## Features

- **Web Scraping** - Obtained information from websites that contain the desired information.
- **PDF Generation** - Generates a PDF with the chords of a song proportioned by the user.
- **File Storage Manipulation** - Prevents storage problems when many PDFs are generated by deleting previous PDFs.
- **Telegram Bot Creation** - Controls a Telegram Bot that is constantly available for user usage.
- **Important Information Hiding** - Prevents data leakage by using .env files.

---

## Tech Information / Libraries Used

- **Python 3.12**
- 'FPDF2' - To generate the PDF where the lyrics are stored.
- 're' - Cleaning the user input to prevent errors.
- 'os' - Accessing the operating system to create folders/files.
- 'pathlib' - For deleting the no longer needed PDFs.
- 'BeautifulSoup' - Along with selenium, is used for web scraping.
- 'selenium' - Along with Beautiful Soup and the Chrome driver, it collects the information existing in websites containing the desired information. It was mainly used in the Chords.py file.
- 'time' - Permits the Chrome driver to wait a few seconds inside a website to allow the JavaScript information inside the website to load.
- 'python-telegram-bot' - This library facilitates the creation of a Telegram bot built within this directory.
- 'requests' - Allows for accessing a website through a link.
- 'lyricsgenius' - Library made by the 'Lyrics Genius' website, facilitating the obtention of valuable information used in the telegram bot.
- 'dotenv' - Used for hiding the important keys or passwords in .env files.

---

# Project Structure

Project/
|- Lyrics.py
|- Chords.py
|- pdf_creation.py
|- Telegram_Bot.py
|- chromedriver.exe
|- DejaVuSans.cw127.pkl
|- DejaVuSans.pkl
|- DejaVuSans.ttf

---

# Architecture Overview

## Chords.py

- Receives input from the user (a song).
- Uses Selenium and a Chrome driver to traverse through the web.
- Fetches the links from the Ultimate Guitar website with the help of a Chrome driver.
- The Chrome driver waits a few seconds while searching the song, so that the JavaScript in the Ultimate Guitar website loads correctly and avoids errors.
- Returns the chords from the selected song.
- If the user does not like the chords returned, it fetches another result also inside the Ultimate Guitar website.
- Avoids errors through 'try-except' statements.

-

## Lyrics.py

- Uses the API of the LyricsGenius website.
- The API Key is hidden in a .env file.
- Receives input from the user (a song).
- Searches for the lyrics of the song written by the user.
- Searches for the artist of the song.
- The user can request the lyrics with a URL from the LyricsGenius website.
- Avoids errors through 'try-except' statements.

-

## pdf_creation.py

- Generates a PDF with the lyrics and the chords of a song the user requests.
- Stores the PDFs in a folder for organization.
- Each time a PDF is generated, the previous PDFs are deleted to avoid storage issues.
- Goes through the name of the song the user requested and cleans it to avoid issues with the name and characters.
- Defines a specific TTF to avoid problems with emojis or non-recognized characters.
- Avoids errors through 'try-except' statements.

-

## Telegram_Bot.py

- Controls a Telegram Bot named '@Kingdddbot'.
- It utilizes a Telegram Token given by Telegram and hides it in a .env file.
- It receives input from the user that can access diverse commands.
- It has a start command that greets the user.
- Contains a Help Command to help the user in case they feel lost.
- Contains a Custom Command which will be later edited in future updates.
- Has a song command that accesses the other files in the repository to return a PDF containing the lyrics and chords of a song based on the user's input.
- Has feedback buttons for the user to click.
- If the feedback is negative, the bot generates a different PDF with the same user input.
- If the feedback is positive, it thanks the user for their feedback.
- Deals with diverse errors that may occur with an error function and the utilization of 'try-except' statements.
- Handles user messages cleanly.
- It can work in groups and return PDFs without problem.
- Prints the bot's status if run in Python.
- Returns the errors and the types of errors to the developer using the Python files.

-

## Chromedriver.exe

- It utilizes the help of the selenium import to fetch from different websites.
- Allows clean web scraping without errors and fetches JavaScript components.
- It waits every time it enters a website, so JavaScript from the website is allowed to load correctly.
- It utilizes a '--headless' option so the user does not see the Chrome driver opening Google.

-

## DejaVuSans.ttf

- A specific font saved in the repository.
- It avoids errors when generating PDFs due to being a TTF (True-Type Font).
- Helps deal with non-recognized characters such as emojis.

---

# How to Use

Ensure Telegram_Bot.py is running locally on your machine to interact with the bot in Telegram. The user can access the bot through Telegram, either on a mobile device or on a desktop. Diverse functions can be triggered with the '/' character.
The main function of the bot is to obtain the lyrics and the chords of a song specified by the user.

---

# Future Updates

- Addition of more commands for handling the user's input.
- Creation of a Discord bot that reproduces songs and returns the PDF containing the lyrics or chords of that song if requested by the user.
- Creation of buttons for the user to request a song in different instruments.
- Utilization of Machine Learning to learn about the chords and produce their chords in case the original chords of a song are not available.
- Implementation of Machine Learning for user song recommendation based on the previously requested songs.
- Translating the Telegram Bot to the cloud to be permanently available to all users at any given time.
-- Potential platforms: AWS, Render, Heroku, or Railway.

---

Dennis Alejandro Guerra Calix -- AGCalixto